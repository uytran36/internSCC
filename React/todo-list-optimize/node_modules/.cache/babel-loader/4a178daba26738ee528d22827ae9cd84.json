{"ast":null,"code":"var _jsxFileName = \"D:\\\\react\\\\todo-list-optimize\\\\src\\\\components\\\\TodoOld.js\";\nimport { React, Component } from \"react\";\nimport \"./TodoOld.css\";\nimport TodoInput from \"./TodoInput\";\nimport TodoFilter from \"./TodoFilter\";\nimport axios from \"axios\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport TodoGeneral from \"./TodoGeneral\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass TodoOld extends Component {\n  constructor() {\n    super(); //create state\n\n    this.state = {\n      todoItems: []\n    }; //create function non parameter\n\n    this.onPressEnter = this.onPressEnter.bind(this);\n    this.chooseAll = this.chooseAll.bind(this);\n    this.clearCompleted = this.clearCompleted.bind(this); //this.routeFunc = this.routeFunc.bind(this);\n  }\n\n  componentDidMount() {\n    axios.get(\"https://60b0f8b91f26610017fff943.mockapi.io/api/v1/todo_data\").then(res => {\n      this.setState({\n        todoItems: res.data\n      });\n    }).catch(err => {\n      console.error(err);\n    });\n  }\n\n  onItemClicked(item) {\n    return () => {\n      const isCompleted = item.isCompleted;\n      const {\n        todoItems\n      } = this.state;\n      const index = this.findIndex(todoItems, item);\n      this.setState({\n        todoItems: [...todoItems.slice(0, index), { ...item,\n          isCompleted: !isCompleted\n        }, ...todoItems.slice(index + 1)]\n      });\n      axios.put(\"https://60b0f8b91f26610017fff943.mockapi.io/api/v1/todo_data/\" + item.id, {\n        isCompleted: !isCompleted\n      }).then(res => {\n        console.log(res.data);\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n  } //double click to edit text\n\n\n  onDoubleClick(item) {\n    return () => {\n      const {\n        todoItems\n      } = this.state;\n      const index = todoItems.indexOf(item);\n      this.setState({\n        todoItems: [...todoItems.slice(0, index), { ...item,\n          isEditing: true,\n          isCompleted: item.isCompleted\n        }, ...todoItems.slice(index + 1)]\n      });\n    };\n  } //save text afer edit (click outside textbox)\n\n\n  onChange(event, item) {\n    const text = event.target.value;\n    const isCompleted = item.isCompleted;\n    const {\n      todoItems\n    } = this.state;\n    const index = this.findIndex(todoItems, item);\n    this.setState({\n      todoItems: [...todoItems.slice(0, index), { ...item,\n        title: text,\n        isEditing: true,\n        isCompleted: isCompleted\n      }, ...todoItems.slice(index + 1)]\n    });\n    axios.put(\"https://60b0f8b91f26610017fff943.mockapi.io/api/v1/todo_data/\" + item.id, {\n      title: text\n    }).then(res => {\n      console.log(res.data);\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  onBlur(item) {\n    return () => {\n      const text = item.title;\n      const isCompleted = item.isCompleted;\n      const {\n        todoItems\n      } = this.state;\n      const index = this.findIndex(todoItems, item);\n      this.setState({\n        todoItems: [...todoItems.slice(0, index), { ...item,\n          title: text,\n          isEditing: false,\n          isCompleted: isCompleted\n        }, ...todoItems.slice(index + 1)]\n      });\n      axios.put(\"https://60b0f8b91f26610017fff943.mockapi.io/api/v1/todo_data/\" + item.id, {\n        title: text\n      }).then(res => {\n        console.log(res.data);\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n  } //delete todo\n\n\n  onDelete(item) {\n    return () => {\n      const {\n        todoItems\n      } = this.state;\n      const index = this.findIndex(todoItems, item);\n      this.setState({\n        todoItems: [...todoItems.slice(0, index), ...todoItems.slice(index + 1)]\n      });\n      axios.delete(\"https://60b0f8b91f26610017fff943.mockapi.io/api/v1/todo_data/\" + item.id).then(response => {\n        console.log(response);\n      });\n    };\n  } //add todo\n\n\n  onPressEnter(event) {\n    if (event.key === \"Enter\") {\n      const {\n        todoItems\n      } = this.state;\n      console.log(todoItems);\n      const n = todoItems.length + 1;\n      todoItems.push({\n        id: n,\n        title: event.target.value,\n        isEditing: false,\n        isCompleted: false\n      });\n      this.setState({\n        todoItems: todoItems\n      });\n      axios.post(\"https://60b0f8b91f26610017fff943.mockapi.io/api/v1/todo_data\", {\n        id: n,\n        title: event.target.value,\n        isEditing: false,\n        isCompleted: false\n      }).then(res => {\n        console.log(res);\n      }).catch(err => {\n        console.log(err);\n      });\n      event.target.value = \"\";\n    }\n  } //click image to complete all\n\n\n  chooseAll() {\n    const {\n      todoItems\n    } = this.state;\n    let count = 0;\n\n    for (let item of todoItems) {\n      if (item.isCompleted === true) {\n        count++;\n      }\n    }\n\n    if (count === todoItems.length) {\n      for (let item of todoItems) {\n        item.isCompleted = false;\n      }\n    } else {\n      for (let item of todoItems) {\n        item.isCompleted = true;\n      }\n    }\n\n    const newState = {\n      todoItems: todoItems\n    };\n    this.setState(newState);\n    let n = todoItems.length; //  set your counter to 1\n\n    let i = 0;\n\n    function myLoop() {\n      setTimeout(function () {\n        axios.put(\"https://60b0f8b91f26610017fff943.mockapi.io/api/v1/todo_data/\" + todoItems[i].id, {\n          isCompleted: todoItems[i].isCompleted\n        }).then(res => {\n          console.log(res.data);\n        }).catch(err => {\n          console.log(err);\n        });\n        i++; //  increment the counter\n\n        if (i < n) {\n          myLoop();\n        }\n      }, 5000);\n    }\n\n    myLoop();\n  } //clear completed\n\n\n  clearCompleted() {\n    axios.get(\"https://60b0f8b91f26610017fff943.mockapi.io/api/v1/todo_data\").then(res => {\n      const todoItems = res.data;\n      let todoList = [];\n\n      for (let item of todoItems) {\n        if (item.isCompleted === true) {\n          axios.delete(\"https://60b0f8b91f26610017fff943.mockapi.io/api/v1/todo_data/\" + item.id).then(response => {\n            console.log(response);\n          }).catch(err => {\n            console.log(err);\n          });\n        } else {\n          todoList.push(item);\n        }\n      }\n\n      this.setState({\n        todoItems: todoList\n      });\n    }).catch(err => {\n      console.error(err);\n    });\n  }\n\n  countActive() {\n    const {\n      todoItems\n    } = this.state;\n    let n = todoItems.length;\n    let count = 0;\n\n    for (let i = 0; i < n; i++) {\n      if (todoItems[i].isCompleted === true) {\n        count++;\n      }\n    }\n\n    return n - count;\n  }\n\n  render() {\n    const numItem = this.countActive();\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"TodoOld\",\n      children: /*#__PURE__*/_jsxDEV(Router, {\n        children: [/*#__PURE__*/_jsxDEV(TodoInput, {\n          onKeyUp: this.onPressEnter,\n          chooseAll: this.chooseAll\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Switch, {\n          children: [/*#__PURE__*/_jsxDEV(Route, {\n            exact: true,\n            path: \"/\",\n            children: /*#__PURE__*/_jsxDEV(TodoGeneral, {\n              path: \"\",\n              todoState: this.state\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 311,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 310,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            exact: true,\n            path: \"/active\",\n            children: /*#__PURE__*/_jsxDEV(TodoGeneral, {\n              path: \"active\",\n              todoState: this.state\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 314,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            exact: true,\n            path: \"/completed\",\n            children: /*#__PURE__*/_jsxDEV(TodoGeneral, {\n              path: \"completed\",\n              todoState: this.state\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 317,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TodoFilter, {\n          numItem: numItem,\n          clearCompleted: this.clearCompleted\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default TodoOld;","map":{"version":3,"sources":["D:/react/todo-list-optimize/src/components/TodoOld.js"],"names":["React","Component","TodoInput","TodoFilter","axios","BrowserRouter","Router","Switch","Route","TodoGeneral","TodoOld","constructor","state","todoItems","onPressEnter","bind","chooseAll","clearCompleted","componentDidMount","get","then","res","setState","data","catch","err","console","error","onItemClicked","item","isCompleted","index","findIndex","slice","put","id","log","onDoubleClick","indexOf","isEditing","onChange","event","text","target","value","title","onBlur","onDelete","delete","response","key","n","length","push","post","count","newState","i","myLoop","setTimeout","todoList","countActive","render","numItem"],"mappings":"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","sourcesContent":["import { React, Component } from \"react\";\r\nimport \"./TodoOld.css\";\r\nimport TodoInput from \"./TodoInput\";\r\nimport TodoFilter from \"./TodoFilter\";\r\nimport axios from \"axios\";\r\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\r\nimport TodoGeneral from \"./TodoGeneral\";\r\n\r\nclass TodoOld extends Component {\r\n  constructor() {\r\n    super();\r\n    //create state\r\n    this.state = { todoItems: [] };\r\n\r\n    //create function non parameter\r\n    this.onPressEnter = this.onPressEnter.bind(this);\r\n    this.chooseAll = this.chooseAll.bind(this);\r\n    this.clearCompleted = this.clearCompleted.bind(this);\r\n    //this.routeFunc = this.routeFunc.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    axios\r\n      .get(\"https://60b0f8b91f26610017fff943.mockapi.io/api/v1/todo_data\")\r\n      .then((res) => {\r\n        this.setState({ todoItems: res.data });\r\n      })\r\n      .catch((err) => {\r\n        console.error(err);\r\n      });\r\n  }\r\n\r\n  onItemClicked(item) {\r\n    return () => {\r\n      const isCompleted = item.isCompleted;\r\n      const { todoItems } = this.state;\r\n      const index = this.findIndex(todoItems, item);\r\n      this.setState({\r\n        todoItems: [\r\n          ...todoItems.slice(0, index),\r\n          {\r\n            ...item,\r\n            isCompleted: !isCompleted,\r\n          },\r\n          ...todoItems.slice(index + 1),\r\n        ],\r\n      });\r\n\r\n      axios\r\n        .put(\r\n          \"https://60b0f8b91f26610017fff943.mockapi.io/api/v1/todo_data/\" +\r\n            item.id,\r\n          {\r\n            isCompleted: !isCompleted,\r\n          }\r\n        )\r\n        .then((res) => {\r\n          console.log(res.data);\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n    };\r\n  }\r\n\r\n  //double click to edit text\r\n  onDoubleClick(item) {\r\n    return () => {\r\n      const { todoItems } = this.state;\r\n      const index = todoItems.indexOf(item);\r\n      this.setState({\r\n        todoItems: [\r\n          ...todoItems.slice(0, index),\r\n          {\r\n            ...item,\r\n            isEditing: true,\r\n            isCompleted: item.isCompleted,\r\n          },\r\n          ...todoItems.slice(index + 1),\r\n        ],\r\n      });\r\n    };\r\n  }\r\n\r\n  //save text afer edit (click outside textbox)\r\n  onChange(event, item) {\r\n    const text = event.target.value;\r\n    const isCompleted = item.isCompleted;\r\n    const { todoItems } = this.state;\r\n    const index = this.findIndex(todoItems, item);\r\n    this.setState({\r\n      todoItems: [\r\n        ...todoItems.slice(0, index),\r\n        {\r\n          ...item,\r\n          title: text,\r\n          isEditing: true,\r\n          isCompleted: isCompleted,\r\n        },\r\n        ...todoItems.slice(index + 1),\r\n      ],\r\n    });\r\n\r\n    axios\r\n      .put(\r\n        \"https://60b0f8b91f26610017fff943.mockapi.io/api/v1/todo_data/\" +\r\n          item.id,\r\n        {\r\n          title: text,\r\n        }\r\n      )\r\n      .then((res) => {\r\n        console.log(res.data);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  onBlur(item) {\r\n    return () => {\r\n      const text = item.title;\r\n      const isCompleted = item.isCompleted;\r\n      const { todoItems } = this.state;\r\n      const index = this.findIndex(todoItems, item);\r\n\r\n      this.setState({\r\n        todoItems: [\r\n          ...todoItems.slice(0, index),\r\n          {\r\n            ...item,\r\n            title: text,\r\n            isEditing: false,\r\n            isCompleted: isCompleted,\r\n          },\r\n          ...todoItems.slice(index + 1),\r\n        ],\r\n      });\r\n\r\n      axios\r\n        .put(\r\n          \"https://60b0f8b91f26610017fff943.mockapi.io/api/v1/todo_data/\" +\r\n            item.id,\r\n          {\r\n            title: text,\r\n          }\r\n        )\r\n        .then((res) => {\r\n          console.log(res.data);\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n    };\r\n  }\r\n\r\n  //delete todo\r\n  onDelete(item) {\r\n    return () => {\r\n      const { todoItems } = this.state;\r\n      const index = this.findIndex(todoItems, item);\r\n      this.setState({\r\n        todoItems: [\r\n          ...todoItems.slice(0, index),\r\n          ...todoItems.slice(index + 1),\r\n        ],\r\n      });\r\n      axios\r\n        .delete(\r\n          \"https://60b0f8b91f26610017fff943.mockapi.io/api/v1/todo_data/\" +\r\n            item.id\r\n        )\r\n        .then((response) => {\r\n          console.log(response);\r\n        });\r\n    };\r\n  }\r\n\r\n  //add todo\r\n  onPressEnter(event) {\r\n    if (event.key === \"Enter\") {\r\n      const { todoItems } = this.state;\r\n      console.log(todoItems);\r\n      const n = todoItems.length + 1;\r\n      todoItems.push({\r\n        id: n,\r\n        title: event.target.value,\r\n        isEditing: false,\r\n        isCompleted: false,\r\n      });\r\n      this.setState({ todoItems: todoItems });\r\n      axios\r\n        .post(\"https://60b0f8b91f26610017fff943.mockapi.io/api/v1/todo_data\", {\r\n          id: n,\r\n          title: event.target.value,\r\n          isEditing: false,\r\n          isCompleted: false,\r\n        })\r\n        .then((res) => {\r\n          console.log(res);\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n      event.target.value = \"\";\r\n    }\r\n  }\r\n\r\n  //click image to complete all\r\n  chooseAll() {\r\n    const { todoItems } = this.state;\r\n\r\n    let count = 0;\r\n    for (let item of todoItems) {\r\n      if (item.isCompleted === true) {\r\n        count++;\r\n      }\r\n    }\r\n    if (count === todoItems.length) {\r\n      for (let item of todoItems) {\r\n        item.isCompleted = false;\r\n      }\r\n    } else {\r\n      for (let item of todoItems) {\r\n        item.isCompleted = true;\r\n      }\r\n    }\r\n\r\n    const newState = { todoItems: todoItems };\r\n    this.setState(newState);\r\n\r\n    let n = todoItems.length; //  set your counter to 1\r\n    let i = 0;\r\n    function myLoop() {\r\n      setTimeout(function () {\r\n        axios\r\n          .put(\r\n            \"https://60b0f8b91f26610017fff943.mockapi.io/api/v1/todo_data/\" +\r\n              todoItems[i].id,\r\n            {\r\n              isCompleted: todoItems[i].isCompleted,\r\n            }\r\n          )\r\n          .then((res) => {\r\n            console.log(res.data);\r\n          })\r\n          .catch((err) => {\r\n            console.log(err);\r\n          });\r\n        i++; //  increment the counter\r\n        if (i < n) {\r\n          myLoop();\r\n        }\r\n      }, 5000);\r\n    }\r\n\r\n    myLoop();\r\n  }\r\n\r\n  //clear completed\r\n  clearCompleted() {\r\n    axios\r\n      .get(\"https://60b0f8b91f26610017fff943.mockapi.io/api/v1/todo_data\")\r\n      .then((res) => {\r\n        const todoItems = res.data;\r\n        let todoList = [];\r\n        for (let item of todoItems) {\r\n          if (item.isCompleted === true) {\r\n            axios\r\n              .delete(\r\n                \"https://60b0f8b91f26610017fff943.mockapi.io/api/v1/todo_data/\" +\r\n                  item.id\r\n              )\r\n              .then((response) => {\r\n                console.log(response);\r\n              })\r\n              .catch((err) => {\r\n                console.log(err);\r\n              });\r\n          } else {\r\n            todoList.push(item);\r\n          }\r\n        }\r\n        this.setState({ todoItems: todoList });\r\n      })\r\n      .catch((err) => {\r\n        console.error(err);\r\n      });\r\n  }\r\n\r\n  countActive() {\r\n    const { todoItems } = this.state;\r\n    let n = todoItems.length;\r\n    let count = 0;\r\n    for (let i = 0; i < n; i++) {\r\n      if (todoItems[i].isCompleted === true) {\r\n        count++;\r\n      }\r\n    }\r\n    return n - count;\r\n  }\r\n\r\n  render() {\r\n    const numItem = this.countActive();\r\n    return (\r\n      <div className=\"TodoOld\">\r\n        <Router>\r\n          <TodoInput onKeyUp={this.onPressEnter} chooseAll={this.chooseAll} />\r\n          <Switch>\r\n            <Route exact path=\"/\">\r\n              <TodoGeneral path=\"\" todoState={this.state} />\r\n            </Route>\r\n            <Route exact path=\"/active\">\r\n              <TodoGeneral path=\"active\" todoState={this.state} />\r\n            </Route>\r\n            <Route exact path=\"/completed\">\r\n              <TodoGeneral path=\"completed\" todoState={this.state} />\r\n            </Route>\r\n          </Switch>\r\n          <TodoFilter numItem={numItem} clearCompleted={this.clearCompleted} />\r\n        </Router>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default TodoOld;\r\n\r\n"]},"metadata":{},"sourceType":"module"}